<!doctype html>
<html lang="en">
<head>
    @@include('./partials/head.html', {
        "title": "历史记录"
    })
    <link rel="stylesheet" href="css/qingjia_his.css">
</head>
<body>
<div id="everything">
    <img src="../shared/img/history.png" alt="historyicon" id="hisicon">
    <h1 class="sometitle">请假历史记录</h1>
    <p class="subtitle" id="plzclick"></p>
    <hr>
    <div id="histable">
        <!-- ajax here -->
    </div>
    <div id="hisdetail" class="detail">
        <!-- ajax here -->
    </div>
</div>

<script type="text/x-handlebars-template" id="handlebars-template-histable">
    {{#each data}}
        <div class="record" data-index="{{@index}}">
            <div class="record-status" data-status="{{status}}"><span>已通过</span></div>
            <div class="record-bar"></div>
            <div class="record-duration">
                {{begin_time}} ~ {{end_time}}
            </div>
        </div>
    {{else}}
        <p class="record-none">你好像没有请过假</p>
    {{/each}}

    {{#if data}}
        <div class="record-btngroup" id="btngroup1">
            <button id="pagi-first" data-targetpage="{{first_page_url}}">&lt;&lt;</button>
            <button id="pagi-prev" data-targetpage="{{prev_page_url}}">&lt;</button>
            <div id="pagi-cur"><span>{{current_page}}</span></div>
            <button id="pagi-next" data-targetpage="{{next_page_url}}">&gt;</button>
            <button id="pagi-last" data-targetpage="{{last_page_url}}">&gt;&gt;</button>
        </div>
    {{/if}}
</script>

<script type="text/x-handlebars-template" id="handlebars-template-hisdetail">
    <p class="detail-label">你尝试在这段时间请假</p>
    <p class="detail-content">{{begin_time}} ~ {{end_time}}</p>
    <p class="detail-label">你的理由是</p>
    <p class="detail-content" style="text-align: justify;">{{leave_reason}}</p>
    {{#if is_leave}}
        <p class="detail-label">你说要去</p>
        <p class="detail-content">{{destination}}</p>
    {{/if}}
    <p class="detail-label">辅导员</p>
    <p class="detail-content" id="detail-status"></p>
    {{#if auth_reason}}
        <p class="detail-label">他（她）说</p>
        <p class="detail-content" style="text-align: justify;">{{auth_reason}}</p>
    {{/if}}
    <div class="detail-btngroup">
        <button onclick="backToTable()" class="am-btn am-btn-secondary">返回列表</button>
        <!-- <button onclick="ajaxCancelRequest({{id}})" class="am-btn am-btn-default detail-cancel">撤回申请</button> -->
    </div>
</script>

<script src="js/qingjia_his.js"></script>
</body>
</html>