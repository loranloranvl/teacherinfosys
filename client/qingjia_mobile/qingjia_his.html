<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>请假系统</title>
    <!-- Set render engine for 360 browser -->
    <meta name="renderer" content="webkit">

    <!-- No Baidu Siteapp-->
    <meta http-equiv="Cache-Control" content="no-siteapp"/>


    <!-- public css -->
    <link rel="stylesheet" href="../dist/css/amazeui.min.css?t=1530439131922">
    <link rel="stylesheet" href="../dist/css/common.min.css?t=1530439131922">
    <link rel="stylesheet" href="../dist/css/tablecommon.css?t=1530439131922">
    <!-- /public css -->
    <link rel="stylesheet" href="./css/qingjia_his.css?t=1530439131922">
    <style>
        
    </style>
    <script src="../dist/js/jquery.min.js?t=1530439131922"></script>
    <script src="../dist/js/amazeui.min.js?t=1530439131922"></script>
    <script src="../dist/js/handlebars-v4.0.11.js?t=1530439131922"></script>
</head>
<body>
<div id="everything">
    <img src="../dist/img/history.png" alt="historyicon" id="hisicon">
    <h1 class="sometitle">请假历史记录</h1>
    <p class="subtitle" id="plzclick"></p>
    <hr>
    <div id="loadericon">
        <i class="am-icon-spinner am-icon-spin" id="loadericon"></i>
    </div>
    <div id="histable">
        <!-- ajax here -->
    </div>
    <div id="hisdetail" class="detail">
        <!-- ajax here -->
    </div>
</div>

<script type="text/x-handlebars-template" id="handlebars-template-histable">
    {{#each data}}
        <div class="record" data-index="{{@index}}">
            <div class="record-status" data-status="{{is_pass}}"><span>已通过</span></div>
            <div class="record-bar"></div>
            <div class="record-duration">
                {{begin_time}} ~ {{end_time}}
            </div>
        </div>
    {{else}}
        <p class="record-none">你好像没有请过假</p>
    {{/each}}

    {{#if data}}
        <div class="record-btngroup" id="btngroup1">
            <button id="pagi-first" data-targetpage="{{first_page_url}}">&lt;&lt;</button>
            <button id="pagi-prev" data-targetpage="{{prev_page_url}}">&lt;</button>
            <div id="pagi-cur"><span>{{current_page}}</span></div>
            <button id="pagi-next" data-targetpage="{{next_page_url}}">&gt;</button>
            <button id="pagi-last" data-targetpage="{{last_page_url}}">&gt;&gt;</button>
        </div>
    {{/if}}
</script>

<script type="text/x-handlebars-template" id="handlebars-template-hisdetail">
    <p class="detail-label">你尝试在这段时间请假</p>
    <p class="detail-content">{{begin_time}} ~ {{end_time}}</p>
    <p class="detail-label">你的理由是</p>
    <p class="detail-content" style="text-align: justify;">{{leave_reason}}</p>
    {{#if is_leave}}
        <p class="detail-label">你说要去</p>
        <p class="detail-content">{{where}}</p>
    {{/if}}
    <p class="detail-label">辅导员最终</p>
    <p class="detail-content" id="detail-status"></p>
    {{#if pass_reason}}
        <p class="detail-label">他（她）说</p>
        <p class="detail-content" style="text-align: justify;">{{pass_reason}}</p>
    {{/if}}
    <div class="detail-btngroup">
        <button onclick="backToTable()" class="am-btn am-btn-secondary">返回列表</button>
        <button onclick="ajaxCancelRequest({{id}})" class="am-btn am-btn-default detail-cancel">撤回申请</button>
    </div>
</script>

<!-- layer弹出层 -->
<script src="../dist/js/layer/layer.js?t=1530439131922"></script>
<!-- 弹出层封装 -->
<script src="../dist/js/dialog.min.js?t=1530439131922"></script>

<script src="../dist/js/common.min.js?t=1530439131922"></script>
<script src="./js/qingjia_his.js?t=1530439131922"></script>
</body>
</html>